<mxfile host="65bd71144e">
    <diagram id="aws-prod" name="Produção AWS - EKS Fargate">
        <mxGraphModel dx="2200" dy="1400" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                
                <!-- AWS Cloud -->
                <mxCell id="aws-cloud" value="" style="sketch=0;outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_aws_cloud;strokeColor=#232F3E;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#232F3E;dashed=0;" vertex="1" parent="1">
                    <mxGeometry x="40" y="40" width="1520" height="1120" as="geometry"/>
                </mxCell>
                
                <mxCell id="aws-title" value="AWS Cloud - Região us-east-1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="1">
                    <mxGeometry x="80" y="50" width="400" height="30" as="geometry"/>
                </mxCell>
                
                <!-- VPC -->
                <mxCell id="vpc" value="VPC (10.0.0.0/16)" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_vpc;strokeColor=#248814;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#AAB7B8;dashed=0;" vertex="1" parent="1">
                    <mxGeometry x="80" y="100" width="1440" height="1000" as="geometry"/>
                </mxCell>
                
                <!-- Internet Gateway -->
                <mxCell id="igw" value="Internet Gateway" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.internet_gateway;" vertex="1" parent="vpc">
                    <mxGeometry x="680" y="20" width="78" height="78" as="geometry"/>
                </mxCell>
                
                <!-- Public Subnet 1 -->
                <mxCell id="public-subnet-1" value="Public Subnet 1&#10;10.0.101.0/24 (us-east-1a)" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#7AA116;fillColor=#F2F6E8;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;" vertex="1" parent="vpc">
                    <mxGeometry x="40" y="140" width="620" height="240" as="geometry"/>
                </mxCell>
                
                <!-- NAT Gateway 1 -->
                <mxCell id="nat-1" value="NAT Gateway" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.nat_gateway;" vertex="1" parent="public-subnet-1">
                    <mxGeometry x="270" y="80" width="78" height="78" as="geometry"/>
                </mxCell>
                
                <!-- Public Subnet 2 -->
                <mxCell id="public-subnet-2" value="Public Subnet 2&#10;10.0.102.0/24 (us-east-1b)" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#7AA116;fillColor=#F2F6E8;verticalAlign=top;align=left;spacingLeft=30;fontColor=#248814;dashed=0;" vertex="1" parent="vpc">
                    <mxGeometry x="780" y="140" width="620" height="240" as="geometry"/>
                </mxCell>
                
                <!-- Private Subnet 1 (EKS) -->
                <mxCell id="private-subnet-1" value="Private Subnet 1&#10;10.0.1.0/24 (us-east-1a)" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#00A4A6;fillColor=#E6F6F7;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" vertex="1" parent="vpc">
                    <mxGeometry x="40" y="420" width="620" height="540" as="geometry"/>
                </mxCell>
                
                <!-- EKS Cluster -->
                <mxCell id="eks-cluster" value="EKS Cluster (Fargate)" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=14;fontStyle=1;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.eks_cloud;" vertex="1" parent="private-subnet-1">
                    <mxGeometry x="260" y="40" width="100" height="100" as="geometry"/>
                </mxCell>
                
                <!-- Fargate Profile - case namespace -->
                <mxCell id="fargate-case" value="Fargate Profile: case" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;fontSize=11;fontStyle=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;" vertex="1" parent="private-subnet-1">
                    <mxGeometry x="40" y="180" width="260" height="320" as="geometry"/>
                </mxCell>
                
                <!-- Backend Pod Blue -->
                <mxCell id="backend-blue" value="Backend Pod&#10;(Blue)" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=pod;fontStyle=1;fontSize=11;" vertex="1" parent="fargate-case">
                    <mxGeometry x="30" y="40" width="80" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Backend Pod Green -->
                <mxCell id="backend-green" value="Backend Pod&#10;(Green)" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#00C853;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=pod;fontStyle=1;fontSize=11;" vertex="1" parent="fargate-case">
                    <mxGeometry x="150" y="40" width="80" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Frontend Pod Blue -->
                <mxCell id="frontend-blue" value="Frontend Pod&#10;(Blue)" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=pod;fontStyle=1;fontSize=11;" vertex="1" parent="fargate-case">
                    <mxGeometry x="30" y="160" width="80" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Frontend Pod Green -->
                <mxCell id="frontend-green" value="Frontend Pod&#10;(Green)" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#00C853;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=pod;fontStyle=1;fontSize=11;" vertex="1" parent="fargate-case">
                    <mxGeometry x="150" y="160" width="80" height="80" as="geometry"/>
                </mxCell>
                
                <!-- K8s Services -->
                <mxCell id="k8s-services" value="Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CCE5FF;strokeColor=#36393d;fontSize=11;fontStyle=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;" vertex="1" parent="fargate-case">
                    <mxGeometry x="320" y="180" width="260" height="140" as="geometry"/>
                </mxCell>
                
                <!-- Backend Service -->
                <mxCell id="backend-svc" value="backend&#10;Service" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#326CE5;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=svc;fontSize=10;" vertex="1" parent="private-subnet-1">
                    <mxGeometry x="360" y="220" width="60" height="60" as="geometry"/>
                </mxCell>
                
                <!-- Frontend Service -->
                <mxCell id="frontend-svc" value="frontend&#10;Service" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#326CE5;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=svc;fontSize=10;" vertex="1" parent="private-subnet-1">
                    <mxGeometry x="480" y="220" width="60" height="60" as="geometry"/>
                </mxCell>
                
                <!-- Ingress Controller -->
                <mxCell id="ingress" value="Ingress&#10;(nginx)" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#326CE5;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=ing;fontSize=11;fontStyle=1;" vertex="1" parent="private-subnet-1">
                    <mxGeometry x="420" y="370" width="80" height="80" as="geometry"/>
                </mxCell>
                
                <!-- Private Subnet 2 -->
                <mxCell id="private-subnet-2" value="Private Subnet 2&#10;10.0.2.0/24 (us-east-1b)" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_security_group;grStroke=0;strokeColor=#00A4A6;fillColor=#E6F6F7;verticalAlign=top;align=left;spacingLeft=30;fontColor=#147EBA;dashed=0;" vertex="1" parent="vpc">
                    <mxGeometry x="780" y="420" width="620" height="540" as="geometry"/>
                </mxCell>
                
                <!-- Fargate Profile kube-system -->
                <mxCell id="fargate-kubesystem" value="Fargate Profile: kube-system (CoreDNS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;fontSize=11;fontStyle=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;" vertex="1" parent="private-subnet-2">
                    <mxGeometry x="180" y="200" width="260" height="120" as="geometry"/>
                </mxCell>
                
                <!-- CoreDNS Pod -->
                <mxCell id="coredns" value="CoreDNS&#10;Pod" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#326CE5;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=pod;fontSize=10;" vertex="1" parent="fargate-kubesystem">
                    <mxGeometry x="90" y="40" width="60" height="60" as="geometry"/>
                </mxCell>
                
                <!-- DynamoDB -->
                <mxCell id="dynamodb" value="DynamoDB&#10;Table: orders" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#4D72F3;gradientDirection=north;fillColor=#3334B9;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=13;fontStyle=1;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.dynamodb;" vertex="1" parent="vpc">
                    <mxGeometry x="100" y="820" width="90" height="90" as="geometry"/>
                </mxCell>
                
                <!-- ECR -->
                <mxCell id="ecr" value="ECR&#10;Repos: backend,&#10;frontend" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=1;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.ecr;" vertex="1" parent="vpc">
                    <mxGeometry x="260" y="820" width="90" height="90" as="geometry"/>
                </mxCell>
                
                <!-- Secrets Manager -->
                <mxCell id="secrets" value="Secrets Manager&#10;(DD_API_KEY)" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F54749;gradientDirection=north;fillColor=#C7131F;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=1;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.secrets_manager;" vertex="1" parent="vpc">
                    <mxGeometry x="420" y="820" width="90" height="90" as="geometry"/>
                </mxCell>
                
                <!-- IAM -->
                <mxCell id="iam" value="IAM&#10;OIDC + IRSA&#10;backend-sa" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F54749;gradientDirection=north;fillColor=#C7131F;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=1;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.iam;" vertex="1" parent="vpc">
                    <mxGeometry x="580" y="820" width="90" height="90" as="geometry"/>
                </mxCell>
                
                <!-- CloudWatch -->
                <mxCell id="cloudwatch" value="CloudWatch&#10;Logs" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F34482;gradientDirection=north;fillColor=#BC1356;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=1;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cloudwatch;" vertex="1" parent="vpc">
                    <mxGeometry x="740" y="820" width="90" height="90" as="geometry"/>
                </mxCell>
                
                <!-- External Services Outside VPC -->
                
                <!-- GitHub Actions -->
                <mxCell id="github" value="GitHub Actions&#10;CI/CD" style="dashed=0;outlineConnect=0;html=1;align=center;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;shape=mxgraph.weblogos.github;fillColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="1620" y="200" width="120" height="120" as="geometry"/>
                </mxCell>
                
                <!-- Datadog SaaS -->
                <mxCell id="datadog-saas" value="Datadog SaaS&#10;APM + Metrics + Logs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#632CA6;strokeColor=#ffffff;fontColor=#ffffff;fontSize=13;fontStyle=1;" vertex="1" parent="1">
                    <mxGeometry x="1620" y="400" width="120" height="100" as="geometry"/>
                </mxCell>
                
                <!-- Users -->
                <mxCell id="users" value="Users" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#6a00ff;strokeColor=#ffffff;fontColor=#ffffff;fontSize=14;fontStyle=1;" vertex="1" parent="1">
                    <mxGeometry x="1620" y="640" width="60" height="120" as="geometry"/>
                </mxCell>
                
                <!-- CONNECTIONS WITH ANIMATIONS -->
                
                <!-- User -> IGW -->
                <mxCell id="conn-user-igw" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#FF6B00;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;dashed=1;dashPattern=8 8;labelBackgroundColor=#ffffff;fontColor=#FF6B00;fontSize=11;fontStyle=1;" edge="1" parent="1" source="users" target="igw">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1520" y="700"/>
                            <mxPoint x="1520" y="159"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn-user-igw-label" value="HTTPS Traffic" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontStyle=1;fontColor=#FF6B00;labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="conn-user-igw">
                    <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                
                <!-- IGW -> Ingress -->
                <mxCell id="conn-igw-ingress" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#FF6B00;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="igw" target="ingress">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- Ingress -> Frontend Service -->
                <mxCell id="conn-ing-fe" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2875E2;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.72;exitY=0.01;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="ingress" target="frontend-svc">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- Ingress -> Backend Service -->
                <mxCell id="conn-ing-be" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2875E2;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.28;exitY=0.01;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="ingress" target="backend-svc">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- Backend Service -> Backend Pods -->
                <mxCell id="conn-besvc-blue" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2875E2;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="backend-svc" target="backend-blue">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- Frontend Service -> Frontend Pods -->
                <mxCell id="conn-fesvc-blue" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2875E2;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="frontend-svc" target="frontend-blue">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                
                <!-- Backend -> DynamoDB (IRSA) -->
                <mxCell id="conn-be-ddb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#00C853;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;dashed=1;dashPattern=12 12;" edge="1" parent="1" source="backend-blue" target="dynamodb">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="conn-be-ddb-label" value="AWS SDK + IRSA" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=11;fontStyle=1;fontColor=#00C853;labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="conn-be-ddb">
                    <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                
                <!-- Backend -> Datadog APM -->
                <mxCell id="conn-be-dd" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#632CA6;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="backend-green" target="datadog-saas">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1480" y="380"/>
                            <mxPoint x="1480" y="450"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn-be-dd-label" value="APM Traces&#10;(Agentless)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontStyle=1;fontColor=#632CA6;labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="conn-be-dd">
                    <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
                        <mxPoint x="10" y="-10" as="offset"/>
                    </mxGeometry>
                </mxCell>
                
                <!-- GitHub Actions -> ECR -->
                <mxCell id="conn-gh-ecr" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#000000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;exitPerimeter=0;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="github" target="ecr">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1560" y="290"/>
                            <mxPoint x="1560" y="965"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn-gh-ecr-label" value="Build &amp; Push&#10;Docker Images" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontStyle=1;fontColor=#000000;labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="conn-gh-ecr">
                    <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
                        <mxPoint x="50" y="-15" as="offset"/>
                    </mxGeometry>
                </mxCell>
                
                <!-- GitHub Actions -> EKS -->
                <mxCell id="conn-gh-eks" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#000000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;exitPerimeter=0;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="github" target="eks-cluster">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1540" y="230"/>
                            <mxPoint x="1540" y="610"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn-gh-eks-label" value="kubectl apply&#10;Blue/Green Deploy" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontStyle=1;fontColor=#000000;labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="conn-gh-eks">
                    <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
                        <mxPoint x="60" y="10" as="offset"/>
                    </mxGeometry>
                </mxCell>
                
                <!-- CloudWatch -> Datadog -->
                <mxCell id="conn-cw-dd" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#632CA6;entryX=0;entryY=0.75;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="cloudwatch" target="datadog-saas">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1500" y="965"/>
                            <mxPoint x="1500" y="475"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="conn-cw-dd-label" value="Logs Forwarding" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontStyle=1;fontColor=#632CA6;labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="conn-cw-dd">
                    <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
                        <mxPoint x="-40" y="10" as="offset"/>
                    </mxGeometry>
                </mxCell>
                
                <!-- Legend -->
                <mxCell id="legend" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
                    <mxGeometry x="80" y="1180" width="800" height="140" as="geometry"/>
                </mxCell>
                
                <mxCell id="legend-title" value="Legenda" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="380" y="1190" width="200" height="30" as="geometry"/>
                </mxCell>
                
                <mxCell id="leg1" value="━━━  Traffic Flow (User → Ingress → Services → Pods)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#FF6B00;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="100" y="1230" width="360" height="25" as="geometry"/>
                </mxCell>
                
                <mxCell id="leg2" value="┅┅┅  AWS SDK Calls (Backend → DynamoDB via IRSA)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#00C853;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="100" y="1255" width="360" height="25" as="geometry"/>
                </mxCell>
                
                <mxCell id="leg3" value="┅┅┅  Observability (Traces → Datadog APM Agentless)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#632CA6;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="100" y="1280" width="360" height="25" as="geometry"/>
                </mxCell>
                
                <mxCell id="leg4" value="┅┅┅  CI/CD (GitHub Actions → ECR + EKS)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#000000;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="480" y="1230" width="360" height="25" as="geometry"/>
                </mxCell>
                
                <mxCell id="leg5" value="🔵 Blue Deployment  |  🟢 Green Deployment" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="480" y="1255" width="360" height="25" as="geometry"/>
                </mxCell>
                
                <mxCell id="leg6" value="Fargate = Serverless Kubernetes (no EC2 nodes)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="480" y="1280" width="360" height="25" as="geometry"/>
                </mxCell>
                
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
